(load "../actor")

(import-namespace meta)
(import-namespace interface )
(import-namespace actor)



(define Compiler Actor

  (init () (.call Actor.init this))

  (def-generic spawn ()
    ((create this))))

(def-task Compiler.send (data)
  (pipe (resolve data)
        (.then (#-> .to-string sibilant (get  'js )))
        (.then (R.tap (emit 'message this)))
        (.catch (emit 'error this))))

(export Compiler)
