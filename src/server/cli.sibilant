(namespace repl)
(include "kit/header")
(import-namespace kit)

(require! program 'commander
          (lit Server) "./iface")

(pipe program
      (.version "0.0.0")
      (.option "-p, --port" "port to listen on" 8199)
      (.parse process.argv))

(const (lit port) program)

(.on (.open (.spawn Server) port) 'open
     (aprint "listening"))
